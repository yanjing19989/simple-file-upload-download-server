<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>文件中心</title>
<link rel="icon" href="data:,">
<link rel="stylesheet" href="/static/style.css">
<script>window.ENCRYPTED = {encrypted_status};</script>
</head>
<body>
<main>
    <header>
        <div class="logo">文件中心 <span class="badge">v1</span></div>
        <div class="actions">
            <button class="btn-outline toggle-theme" id="themeBtn" title="切换主题">🌗</button>
            <!-- 主题色按钮（主按钮 + 子菜单） -->
            <div style="position:relative;">
                <button class="btn-outline" id="themeColorBtn" title="主题色">🎨</button>
                <div id="themePaletteMenu" style="display:none; position:absolute; right:0; margin-top:10px; background:var(--card-bg); border:var(--border); padding:8px; border-radius:10px; box-shadow:var(--shadow);">
                    <div style="display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-start;">
                        <button class="palette-btn" data-color="#6366f1" title="靛蓝经典"></button>
                        <button class="palette-btn" data-color="#8b5cf6" title="紫罗兰"></button>
                        <button class="palette-btn" data-color="#06b6d4" title="青蓝"></button>
                        <button class="palette-btn" data-color="#10b981" title="翡翠绿"></button>
                        <button class="palette-btn" data-color="#f59e0b" title="琥珀金"></button>
                        <button class="palette-btn" data-color="#ef4444" title="珊瑚红"></button>
                        <button class="palette-btn" data-color="#ec4899" title="玫瑰粉"></button>
                    </div>
                </div>
            </div>
            <button class="btn-outline" id="resetKeyBtn" style="display:none;">重置密钥</button>
            <button class="btn-ghost" id="aboutBtn">关于</button>
        </div>
    </header>
    <section class="grid">
        <div class="card">
            <h2>上传文件</h2>
            <div class="drop-zone" id="dropZone">
                <p style="font-size:1rem;margin-bottom:12px;"><strong>拖拽文件</strong> 或 <label for="fileInput" id="selectLabel" class="btn btn-primary">浏览选择</label></p>
                <p style="font-size:.8rem; letter-spacing:.5px;">支持多文件，大小显示与进度跟踪</p>
                <input type="file" id="fileInput" multiple>
                <!-- 已选择文件信息 -->
                <div id="selectedList" style="margin-top:12px;font-size:.85rem;color:var(--muted);">未选择文件</div>
                <div class="meta-line" style="margin-top:22px;"><span>状态</span><span id="status">待命</span></div>
                <div class="progress-wrap" id="progressWrap">
                    <progress id="progressBar" value="0" max="100"></progress>
                    <div class="meta-line"><span id="speedLine">0 KB/s</span><span id="etaLine"></span></div>
                </div>
            </div>
            <div style="display:flex; gap:12px; flex-wrap:wrap; margin-top:24px;">
                <button class="btn-primary" id="uploadBtn">开始上传</button>
                <button class="btn-outline" id="clearBtn">清空进度</button>
            </div>
        </div>
        <div class="card" style="position:relative;">
            <h2 style="display:flex;align-items:center;gap:8px;">文件列表 <span id="fileCount" class="count"></span></h2>
            <div class="toolbar">
                <input id="search" placeholder="搜索文件..." autocomplete="off">
                <button class="btn-outline" id="selectAllBtn">全选</button>
                <button class="btn-outline" id="invertBtn">反选</button>
                <button class="btn-outline" id="refreshBtn">刷新</button>
                <button class="btn-primary" id="downloadSelBtn">下载所选</button>
            </div>
            <div class="table-container">
                <table class="files-table" id="filesTable">
                    <thead><tr><th style="width:40px;"></th><th>文件名</th><th style="width:110px;">大小</th></tr></thead>
                    <tbody id="fileTableBody"></tbody>
                </table>
            </div>
            <div class="meta-line" style="margin-top:14px;"><span id="selectedCount">0 已选</span><span id="lastRefresh">--</span></div>
        </div>
    </section>
    <footer>界面增强版 · <span id="encState"></span></footer>
</main>
<div class="toast-stack" id="toastStack"></div>
<script src="/static/app.js"></script>
</body>
</html>
